<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

 <title>Book Collection</title>
 <style>
  * {
    box-sizing: border-box;
  }
  

  .column {
    float: left;
    width: 50%;
    padding: 10px;
    height: 300px; /* Should be removed. Only for demonstration */
  }
  
  .button{
    width: 15%;
  }
  
  .bookHeader{
    width: 40%;
  }

  .textInput{
    width: 90%;
    padding: 7px 14px;
  }

  .descInput{
    width: 90%;
    padding: 7px 14px;
  }

  h1{
    text-align: center;
  }
  

  .row:after {
    content: "";
    display: table;
    clear: both;
  }
  </style>
</head>

<body>
  <h1>Book Collection</h1>
  
   <div class="row">
    <div class="column">

   <form action="/books" method="patch">
    Title:<br/>
    <input id="titleForm" type="text" name="Title" class="textInput">
    <br/>
    <br/>
    Author:<br/>
    <input id="authorForm" type="text" name="Author" class="textInput">
    <br/>
    <br/> Description:<br/>
    <textarea id="descriptionForm" name="Text1" cols="40" rows="5" class="descInput">
    
    </textarea>
    <br/><br/>
    <input id=saveNewBtn type="button" value="Save New" class="button" >
    <input id=saveBtn type="button" value="Save" class="button"> 
    <input id=deleteBtn type="button" value="Delete" class="button">
  </form>
  </table>
  </div>
</th>

  <div class="column">
  <table width=90%>
    <tr>
      <th width=20% >Title</th>
      <th width=20% >Author</th>
      <th width=50% >Description</th>
    </tr>
    </tr>
  </table>
</div>
</div>
  <br/>

  <script>
    
    bookTable = document.querySelector("table")
    let selectedtd
    bookTable.onclick = function (event){
      let target = event.target.closest('tr');
      if (target.id == '') return;
      clickHandler(target)
    }

    fetch("/books")
      .then(response => response.json())
      .then(bookList => {
        
        bookList.forEach(book => {
          
          // Create the table row
          row = document.createElement("tr")
          
          
          title = document.createElement("td")
          title.innerHTML = book.title
          author = document.createElement("td")
          author.innerHTML = book.author
          description = document.createElement("td")
          description.innerHTML = book.description
  
          row.id = "row" + book.id

          row.appendChild(title);
          row.appendChild(author);
          row.appendChild(description);
          
          bookTable.appendChild(row)

        })
      })


      function clickHandler(input){
        console.log(input);
      }
      
      function transferDataToForm() {
      document.getElementById("titleForm").value = document.getElementById("1").value;
    }
  </script>
</body>